<svg xmlns="http://www.w3.org/2000/svg" height="2327" preserveAspectRatio="none" style="width:1646px;height:2327px" width="1646">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <path fill="#DDD" stroke="#a80036" d="M538 40.953h745v2280.133H538z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="877" y="53.02">
    Mojaloop
  </text>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="439" x="601.75" y="28.708">
    PISP Linking: Credential registration (verification)
  </text>
  <path stroke="#a80036" d="M29 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 103.383v28"/>
  <path stroke="#a80036" d="M29 131.383v84.531"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 215.914v28"/>
  <path stroke="#a80036" d="M29 243.914v2035.875M628 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M628 103.383v28"/>
  <path stroke="#a80036" d="M628 131.383v84.531"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M628 215.914v28"/>
  <path stroke="#a80036" d="M628 243.914v2035.875"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M623 552.57h10v1727.219h-10z"/>
  <path stroke="#a80036" d="M816 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M816 103.383v28"/>
  <path stroke="#a80036" d="M816 131.383v84.531"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M816 215.914v28"/>
  <path stroke="#a80036" d="M816 243.914v2035.875M1227 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1227 103.383v28"/>
  <path stroke="#a80036" d="M1227 131.383v84.531"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1227 215.914v28"/>
  <path stroke="#a80036" d="M1227 243.914v2035.875M1316.5 95.383v8"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1316.5 103.383v28"/>
  <path stroke="#a80036" d="M1316.5 131.383v84.531"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1316.5 215.914v28"/>
  <path stroke="#a80036" d="M1316.5 243.914v2035.875"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M1311.5 656.234h10v1623.555h-10z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 60.086h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="80.081">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M542 60.086h168v30.297H542z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="549" y="80.081">
    Thirdparty-API-Adapter
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M724 60.086h180v30.297H724z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="731" y="80.081">
    Account Lookup Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1175 60.086h100v30.297h-100z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1182" y="80.081">
    Auth Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1289 60.086h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1296" y="80.081">
    DFSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 2279.789h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="2299.784">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M542 2279.789h168v30.297H542z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="549" y="2299.784">
    Thirdparty-API-Adapter
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M724 2279.789h180v30.297H724z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="731" y="2299.784">
    Account Lookup Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1175 2279.789h100v30.297h-100z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="1182" y="2299.784">
    Auth Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1289 2279.789h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1296" y="2299.784">
    DFSP
  </text>
  <path d="M8.25 136.383v70h1329v-60l-10-10H8.25" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1327.25 136.383v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1039" x="146.75" y="153.45">
    The PISP uses the FIDO registration flow to generate a new keypair and sign the challenge, relying on the user performing an &quot;unlock action&quot; on their mobile device.
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="820" x="146.75" y="183.715">
    The PISP uses the PublicKeyCredential as the payload for the credential, which can be understood by the Auth Service and DFSP
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="508" x="146.75" y="198.848">
    See https://webauthn.guide/#authentication for more information on this object
  </text>
  <path fill="#A80036" stroke="#a80036" d="M611 548.57l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M29 552.57h588"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="36" y="403.743">
    CRED-0
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="94" y="259.981">
    PUT /consents/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="110" y="275.114">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="110" y="290.247">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="110" y="305.379">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="126" y="320.512">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="142" y="335.645">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="158" y="350.778">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="158" y="365.911">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="142" y="381.043">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="142" y="396.176">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="158" y="411.309">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="158" y="426.442">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="142" y="441.575">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="126" y="456.707">
    ],
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="126" y="471.84">
    credential: {// This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="142" y="486.973">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="142" y="502.106">
    status: &quot;PENDING&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="142" y="517.239">
    payload: PublicKeyCredential
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="126" y="532.372">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="110" y="547.504">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M40 577.703l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 581.703h588"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="46" y="576.637">
    CRED-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="104" y="576.637">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1299.5 652.234l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M633 656.234h672.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="640" y="628.469">
    CRED-2
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="698" y="605.77">
    PUT /consents/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="714" y="620.903">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="714" y="636.036">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="714" y="651.168">
    {...}
  </text>
  <path fill="#A80036" stroke="#a80036" d="M644 681.367l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M638 685.367h672.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="650" y="680.301">
    CRED-3
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="708" y="680.301">
    202 Accepted
  </text>
  <path fill="#FBFB77" filter="url(#a)" stroke="#a80036" d="M1045.5 698.367h542v159h-542z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="534" x="1049.5" y="714.434">
    1. DFSP checks the signed challenge against the derived challenge from the scopes
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="383" x="1049.5" y="744.7">
    If the DFSP opts to use the hub-hosted Auth-Service it then:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="1049.5" y="759.832">
    1. Registers the consent with the Auth Service
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1347.5" y="759.832">
    POST /consents
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="465" x="1049.5" y="774.965">
    2. If the DFSP recieves a `PUT /consents/{id}` and the callback contains
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="1061.5" y="790.098">
    Consent.credential.status
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1265.5" y="790.098">
    of
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="1281.5" y="790.098">
    VERIFIED
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1345.5" y="790.098">
    , for each scope in the
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="1061.5" y="805.231">
    Consent, the DFSP creates a
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1249.5" y="805.231">
    CredentialScope
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="1373.5" y="805.231">
    else, if it recieves
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="423" x="1061.5" y="820.364">
    a `PUT /consents/{id}/error` callback, it knows that the Consent is
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="1061.5" y="835.497">
    invalid, and can propagate the error back to the PISP
  </text>
  <path fill="#A80036" stroke="#a80036" d="M644 1212.75l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M638 1216.75h672.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="650" y="1045.223">
    CRED-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="708" y="878.762">
    POST /consents
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="724" y="893.895">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="724" y="909.028">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="724" y="924.161">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="740" y="939.293">
    consentId: &quot;123
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="860" y="939.293">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="740" y="954.426">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="756" y="969.559">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="772" y="984.692">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="772" y="999.825">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="772" y="1014.957">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="756" y="1030.09">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="756" y="1045.223">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="772" y="1060.356">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="772" y="1075.489">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="772" y="1090.622">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="756" y="1105.754">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="740" y="1120.887">
    ],
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="740" y="1136.02">
    credential: {// This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="756" y="1151.153">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="756" y="1166.286">
    status: &quot;PENDING&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="756" y="1181.418">
    payload: PublicKeyCredential
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="740" y="1196.551">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="724" y="1211.684">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1299.5 1241.883l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M633 1245.883h672.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="640" y="1240.817">
    CRED-5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="698" y="1240.817">
    &quot;202 Accepted&quot;
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1215 1316.414l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M633 1320.414h588"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="640" y="1292.649">
    CRED-6
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="698" y="1269.95">
    POST /consents
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="714" y="1285.082">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="714" y="1300.215">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="714" y="1315.348">
    {...}
  </text>
  <path fill="#A80036" stroke="#a80036" d="M644 1345.547l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M638 1349.547h588"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="650" y="1344.481">
    CRED-7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="708" y="1344.481">
    &quot;202 Accepted&quot;
  </text>
  <path fill="#FBFB77" filter="url(#a)" stroke="#a80036" d="M1028 1362.547h398v53h-398z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="390" x="1032" y="1378.614">
    The Auth Service checks the signature against the challenge,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="381" x="1032" y="1393.747">
    and if provided, the metadata field to prove the authenticity
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="1032" y="1408.879">
    of the key.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M644 1740.734l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M638 1744.734h588"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="650" y="1588.34">
    CRED-8
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="708" y="1437.012">
    PUT /consents/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="724" y="1452.145">
    FSIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="724" y="1467.278">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="724" y="1482.411">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="740" y="1497.543">
    consentId: &quot;123
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="860" y="1497.543">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="740" y="1512.676">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="756" y="1527.809">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="772" y="1542.942">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="772" y="1558.075">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="756" y="1573.207">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="756" y="1588.34">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="772" y="1603.473">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="772" y="1618.606">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="756" y="1633.739">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="740" y="1648.872">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="724" y="1664.004">
    credential: {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="756" y="1679.137">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="272" x="756" y="1694.27">
    status: &quot;VERIFIED&quot;, //this is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="756" y="1709.403">
    payload: PublicKeyCredential
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="740" y="1724.536">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="724" y="1739.668">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1215 1769.867l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M633 1773.867h588"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="640" y="1768.801">
    CRED-9
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="698" y="1768.801">
    &quot;200 OK&quot;
  </text>
  <path fill="#FBFB77" filter="url(#a)" stroke="#a80036" d="M821.5 1786.867h811v68h-811z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="455" x="825.5" y="1802.934">
    The auth service is now the authoritative source for the Consent object.
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="825.5" y="1833.2">
    It must register the consentId with the ALS
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="795" x="833.5" y="1848.332">
    - `Consent` - to allow for `GET /consent/{ID}` calls etc. Will point to the fspId of the Auth Service responsible for the Consent
  </text>
  <path fill="#A80036" stroke="#a80036" d="M827 1938.063l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M821 1942.063h405"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="833" y="1906.731">
    CRED-10
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="900" y="1876.465">
    POST /participants/CONSENTS/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="916" y="1891.598">
    FSIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="916" y="1906.731">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="932" y="1921.864">
    fspId: &quot;central-auth&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="916" y="1936.997">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1215 1967.195l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M816 1971.195h405"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="823" y="1966.129">
    CRED-11
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="890" y="1966.129">
    202 Accepted
  </text>
  <path fill="#D3D3D3" filter="url(#a)" stroke="#a80036" d="M657 1984.195h318v23H657z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="661" y="2000.262">
    ALS registers a new entry in the Consents oracle
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1215 2105.125l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M816 2109.125h405"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="823" y="2066.227">
    CRED-12
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="890" y="2028.395">
    PUT /participants/CONSENTS/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="906" y="2043.528">
    FSIOP-Source: account-lookup-service
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="906" y="2058.661">
    FSIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="906" y="2073.794">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="922" y="2088.926">
    fspId: &quot;central-auth&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="906" y="2104.059">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M827 2134.258l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M821 2138.258h405"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="833" y="2133.192">
    CRED-13
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="900" y="2133.192">
    200 OK
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1299.5 2193.656l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M633 2197.656h672.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="640" y="2177.457">
    CRED-14
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="707" y="2162.325">
    PUT /consents/123
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="723" y="2177.457">
    FSIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="723" y="2192.59">
    FSPIOP-Destination: dfspa
  </text>
  <path fill="#A80036" stroke="#a80036" d="M644 2222.79l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M638 2226.789h672.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="650" y="2221.723">
    CRED-15
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="717" y="2221.723">
    &quot;200 OK&quot;
  </text>
  <path fill="#FBFB77" filter="url(#a)" stroke="#a80036" d="M1091.5 2239.789h450v23h-450z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="442" x="1095.5" y="2255.856">
    DFSP is now satisfied that the Consent registered by the PISP is valid.
  </text>
</svg>
