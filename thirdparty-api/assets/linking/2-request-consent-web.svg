<svg xmlns="http://www.w3.org/2000/svg" height="2289" preserveAspectRatio="none" style="width:3468px;height:2289px" width="3468">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="327" x="1570.5" y="28.708">
    PISP Linking: Request consent (Web)
  </text>
  <path fill="#DDD" stroke="#a80036" d="M766.5 40.953h73v2242.344h-73z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="769.5" y="53.02">
    Mojaloop
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 133.25h10v67.133H24z"/>
  <path stroke="#a80036" d="M24 133.25v67.133M34 133.25v67.133M24 133.25h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 228.383h10v262.125H24z"/>
  <path stroke="#a80036" d="M24 228.383v262.125M34 228.383v262.125M24 490.508h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M24 1384.016h10v97.398H24zM798 461.375h10v441.789h-10zM798 1129.023h10v284.125h-10zM1572 731.5h10v426.656h-10zM1917 1481.414h10V2179h-10zM2456 1481.414h10V2188h-10z"/>
  <path stroke="#a80036" d="M29 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 133.25v28"/>
  <path stroke="#a80036" d="M29 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M29 200.383v28"/>
  <path stroke="#a80036" d="M29 228.383V2197M802.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M802.5 133.25v28"/>
  <path stroke="#a80036" d="M802.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M802.5 200.383v28"/>
  <path stroke="#a80036" d="M802.5 228.383V2197M1576.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1576.5 133.25v28"/>
  <path stroke="#a80036" d="M1576.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1576.5 200.383v28"/>
  <path stroke="#a80036" d="M1576.5 228.383V2197M1922 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1922 133.25v28"/>
  <path stroke="#a80036" d="M1922 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M1922 200.383v28"/>
  <path stroke="#a80036" d="M1922 228.383V2197M2461 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2461 133.25v28"/>
  <path stroke="#a80036" d="M2461 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M2461 200.383v28"/>
  <path stroke="#a80036" d="M2461 228.383V2197M3075.5 123.25v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M3075.5 133.25v28"/>
  <path stroke="#a80036" d="M3075.5 161.25v39.133"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M3075.5 200.383v28"/>
  <path stroke="#a80036" d="M3075.5 228.383V2197"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 87.953h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="107.948">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 2196h44v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="2215.995">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M771.5 87.953h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="778.5" y="107.948">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M771.5 2196h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="778.5" y="2215.995">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1549.5 87.953h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1556.5" y="107.948">
    DFSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1549.5 2196h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="1556.5" y="2215.995">
    DFSP
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1903" y="119.948">
    User
  </text>
  <circle cx="1922" cy="49.953" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M1922 57.953v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="1903" y="2208.995">
    User
  </text>
  <circle cx="1922" cy="2222.297" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M1922 2230.297v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2408 87.953h102v30.297h-102z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="2415" y="107.948">
    WebBrowser
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2408 2196h102v30.297h-102z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="2415" y="2215.995">
    WebBrowser
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2983.5 87.953h181v30.297h-181z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="2990.5" y="107.948">
    DFSPAuthorizeSimulator
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M2983.5 2196h181v30.297h-181z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="167" x="2990.5" y="2215.995">
    DFSPAuthorizeSimulator
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 133.25h10v67.133H24z"/>
  <path stroke="#a80036" d="M24 133.25v67.133M34 133.25v67.133M24 133.25h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#fff" d="M24 228.383h10v262.125H24z"/>
  <path stroke="#a80036" d="M24 228.383v262.125M34 228.383v262.125M24 490.508h10"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M24 1384.016h10v97.398H24zM798 461.375h10v441.789h-10zM798 1129.023h10v284.125h-10zM1572 731.5h10v426.656h-10zM1917 1481.414h10V2179h-10zM2456 1481.414h10V2188h-10z"/>
  <path d="M5 166.25v25h1594v-15l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1589 166.25v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="783" x="404.25" y="183.317">
    The user initiated some sort of account linking by choosing the appropriate DFSP from a screen inside the PISP application.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M786 457.375l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M34 461.375h758"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="41" y="350.379">
    REQ-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="89" y="244.45">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="113" y="259.582">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="113" y="274.715">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="105" y="289.848">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="113" y="304.981">
    consentRequestId: &quot;456&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="672" x="113" y="320.114">
    userId: &quot;username1234&quot;, //so the dfsp can associate this request with GET /accounts/
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="113" y="335.247">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="129" y="350.379">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="504" x="145" y="350.379">
    accountId: &quot;dfsp.username.1234&quot;, // This is *optional* for web.
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="145" y="365.512">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="129" y="380.645">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="145" y="395.778">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="113" y="410.911">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="113" y="426.043">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="113" y="441.176">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="401" y="441.176">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="97" y="456.309">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M40 486.508l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 490.508h763"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="46" y="485.442">
    REQ-2
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="94" y="485.442">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1560 727.5l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M808 731.5h758"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="815" y="620.504">
    REQ-3
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="863" y="514.575">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="887" y="529.707">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="887" y="544.84">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="879" y="559.973">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="887" y="575.106">
    consentRequestId: &quot;456&quot;,
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="672" x="887" y="590.239">
    userId: &quot;username1234&quot;, //so the dfsp can associate this request with GET /accounts/
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="887" y="605.372">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="903" y="620.504">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="919" y="635.637">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="903" y="650.77">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="919" y="665.903">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="887" y="681.036">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="887" y="696.168">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="887" y="711.301">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1175" y="711.301">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="871" y="726.434">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M819 756.633l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M813 760.633h758"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="825" y="755.567">
    REQ-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="873" y="755.567">
    202 Accepted
  </text>
  <path stroke="#a80036" d="M1582 789.766h42M1624 789.766v13M1583 802.766h41"/>
  <path fill="#A80036" stroke="#a80036" d="M1593 798.766l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="1589" y="784.7">
    DFSP-1
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="1646" y="784.7">
    Verify the consentRequest is valid or not?
  </text>
  <path fill="#A80036" stroke="#a80036" d="M3064 827.898l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1582 831.898h1488"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1589" y="826.832">
    SIM-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="1633" y="826.832">
    POST /store/consentRequests/456
  </text>
  <path stroke="#a80036" d="M3076 861.031h42M3118 861.031v13M3077 874.031h41"/>
  <path fill="#A80036" stroke="#a80036" d="M3087 870.031l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="3083" y="855.965">
    SIM-2
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="3127" y="855.965">
    store consentRequest details
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1593 899.164l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1587 903.164h1488"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1599" y="898.098">
    SIM-3
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1643" y="898.098">
    201 Created
  </text>
  <path fill="#A80036" stroke="#a80036" d="M819 1125.023l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M813 1129.023h758"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="825" y="1025.594">
    REQ-5
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="873" y="927.231">
    PUT /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="897" y="942.364">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="897" y="957.497">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="889" y="972.629">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="897" y="987.762">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="913" y="1002.895">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="929" y="1018.028">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="913" y="1033.161">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="929" y="1048.293">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="897" y="1063.426">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="897" y="1078.559">
    authChannels: [ &quot;Web&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="897" y="1093.692">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1185" y="1093.692">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="536" x="897" y="1108.825">
    authUri: &quot;dfspa.com/authorize?consentRequestId=456&quot; // This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="881" y="1123.957">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1565 1154.156l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M808 1158.156h763"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="815" y="1153.09">
    REQ-6
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="863" y="1153.09">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M45 1380.016l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M39 1384.016h758"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="51" y="1280.586">
    REQ-7
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="99" y="1182.223">
    PUT /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="123" y="1197.356">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="123" y="1212.489">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="115" y="1227.622">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="123" y="1242.754">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="139" y="1257.887">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="155" y="1273.02">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="139" y="1288.153">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="155" y="1303.286">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="123" y="1318.418">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="123" y="1333.551">
    authChannels: [ &quot;Web&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="123" y="1348.684">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="411" y="1348.684">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="536" x="123" y="1363.817">
    authUri: &quot;dfspa.com/authorize?consentRequestId=456&quot; // This is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="107" y="1378.95">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M791 1409.148l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M34 1413.148h763"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="41" y="1408.082">
    REQ-8
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="89" y="1408.082">
    200 OK
  </text>
  <path d="M5 1426.148v25h1594v-15l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1589 1426.148v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="779" x="374.25" y="1443.215">
    At this point, the PISP knows that the Web authChannel is in use and the PISP App should redirect the user to the provided
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="1157.25" y="1443.215">
    authUri
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1213.25" y="1443.215">
    .
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2444 1477.414l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M29 1481.414h2421"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="36" y="1476.348">
    SIM-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="80" y="1476.348">
    window.location &lt;- authUri ==&gt;
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="352" x="336" y="1476.348">
    GET dfspa.com/authorize?consentRequestId=456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="688" y="1476.348">
    &amp;callbackUri=pisp-app://callback...
  </text>
  <path fill="#A80036" stroke="#a80036" d="M3064 1506.547l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2466 1510.547h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2473" y="1505.481">
    SIM-5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="2517" y="1505.481">
    GET
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="513" x="2546" y="1505.481">
    /authorize?consentRequestId=456&amp;callbackUri=pisp-app://callback...
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2477 1535.68l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2471 1539.68h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2483" y="1534.614">
    SIM-6
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="2527" y="1534.614">
    200 OK: send
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="2616" y="1534.614">
    /authorize
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="2694" y="1534.614">
    single page application (SPA)
  </text>
  <path stroke="#a80036" d="M2466 1568.813h42M2508 1568.813v13M2467 1581.813h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2477 1577.813l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2473" y="1563.747">
    SIM-7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="2517" y="1563.747">
    RENDER:
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="2577" y="1563.747">
    login form
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2444 1606.945l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1927 1610.945h523"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="1934" y="1605.879">
    SIM-8
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="1978" y="1605.879">
    SUBMIT
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="2031" y="1605.879">
    username &amp; password
  </text>
  <path fill="#A80036" stroke="#a80036" d="M3064 1696.61l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2466 1700.609h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="2473" y="1665.278">
    SIM-9
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="2517" y="1635.012">
    POST /login
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2525" y="1650.145">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2541" y="1665.278">
    username,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2541" y="1680.411">
    password,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2525" y="1695.543">
    }
  </text>
  <path stroke="#a80036" d="M3076 1744.875h42M3118 1744.875v13M3077 1757.875h41"/>
  <path fill="#A80036" stroke="#a80036" d="M3087 1753.875l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="3083" y="1732.243">
    SIM-10
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="3136" y="1724.676">
    verify User&apos;s credentials
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="3136" y="1739.809">
    take action on
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="3231" y="1739.809">
    TTK defined rule for username
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="3456" y="1739.809">
    &quot;
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2477 1783.008l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2471 1787.008h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2483" y="1781.942">
    SIM-11
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="2536" y="1781.942">
    201 OK: user authorized
  </text>
  <path fill="#A80036" stroke="#a80036" d="M3064 1812.14l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2466 1816.141h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2473" y="1811.075">
    SIM-12
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="2526" y="1811.075">
    GET /store/consentRequests/456
  </text>
  <path stroke="#a80036" d="M3076 1845.273h42M3118 1845.273v13M3077 1858.273h41"/>
  <path fill="#A80036" stroke="#a80036" d="M3087 1854.273l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="3083" y="1840.207">
    SIM-13
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="3136" y="1840.207">
    find consentRequest details for id=456
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2477 1883.406l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2471 1887.406h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2483" y="1882.34">
    SIM-14
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="343" x="2536" y="1882.34">
    200 OK: consent requests details in response payload
  </text>
  <path stroke="#a80036" d="M2466 1931.672h42M2508 1931.672v13M2467 1944.672h41"/>
  <path fill="#A80036" stroke="#a80036" d="M2477 1940.672l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2473" y="1919.04">
    SIM-15
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="2526" y="1911.473">
    RENDER
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="221" x="2582" y="1911.473">
    ask the User to grant consent
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="2807" y="1911.473">
    for
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="2828" y="1911.473">
    consentRequestId=456
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2444 1969.805l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1927 1973.805h523"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1934" y="1968.739">
    SIM-16
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="1987" y="1968.739">
    SUBMIT:
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="2044" y="1968.739">
    consent granted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M3064 2059.469l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M2466 2063.469h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2473" y="2028.137">
    SIM-17
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="2526" y="1997.872">
    POST /authorize
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2534" y="2013.004">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="2550" y="2028.137">
    consentRequestId=456
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="2710" y="2028.137">
    ,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2550" y="2043.27">
    username,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="2534" y="2058.403">
    }
  </text>
  <path stroke="#a80036" d="M3076 2107.734h42M3118 2107.734v13M3077 2120.734h41"/>
  <path fill="#A80036" stroke="#a80036" d="M3087 2116.734l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="3083" y="2095.102">
    SIM-18
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="3136" y="2087.536">
    generate a
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="3210" y="2087.536">
    secret=&quot;some-secret&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="3136" y="2102.669">
    take action on
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="3231" y="2102.669">
    TTK defined rule for username
  </text>
  <path fill="#A80036" stroke="#a80036" d="M2477 2145.867l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M2471 2149.867h604"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="2483" y="2144.801">
    SIM-19
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="2536" y="2144.801">
    201 OK: response: {
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="2669" y="2144.801">
    secret:&quot;some-secret&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="2825" y="2144.801">
    &quot; }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1933 2175l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M1927 2179h528"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1939" y="2173.934">
    SIM-20
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="1992" y="2173.934">
    redirects to callbackUri=&quot;pisp-app://callback...?
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="2291" y="2173.934">
    secret=some-secret
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="2439" y="2173.934">
    &quot;
  </text>
</svg>
