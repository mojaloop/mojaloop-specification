<svg xmlns="http://www.w3.org/2000/svg" height="649" preserveAspectRatio="none" style="width:1264px;height:649px" width="1264">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="309" x="480" y="28.708">
    PISP Linking: Authentication (Web)
  </text>
  <path fill="#DDD" stroke="#a80036" d="M471.5 40.953h73v602.383h-73z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="474.5" y="53.02">
    Mojaloop
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M503 312.445h10v163.063h-10zM982 446.375h10v149.664h-10z"/>
  <path stroke="#a80036" d="M34 95.383v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M34 105.383v28"/>
  <path stroke="#a80036" d="M34 133.383v54.265"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M34 187.648v28"/>
  <path stroke="#a80036" d="M34 215.648v389.391M507.5 95.383v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M507.5 105.383v28"/>
  <path stroke="#a80036" d="M507.5 133.383v54.265"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M507.5 187.648v28"/>
  <path stroke="#a80036" d="M507.5 215.648v389.391M986.5 95.383v10"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M986.5 105.383v28"/>
  <path stroke="#a80036" d="M986.5 133.383v54.265"/>
  <path stroke="#a80036" stroke-dasharray="1,4" d="M986.5 187.648v28"/>
  <path stroke="#a80036" d="M986.5 215.648v389.391"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M10 60.086h44v30.297H10z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="17" y="80.081">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M10 604.039h44v30.297H10z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="17" y="624.034">
    PISP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M476.5 60.086h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="483.5" y="80.081">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M476.5 604.039h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="483.5" y="624.034">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M959.5 60.086h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="966.5" y="80.081">
    DFSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M959.5 604.039h51v30.297h-51z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="966.5" y="624.034">
    DFSP
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M503 312.445h10v163.063h-10zM982 446.375h10v149.664h-10z"/>
  <path d="M10 138.383v40h999v-30l-10-10H10" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M999 138.383v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="485" x="154.25" y="155.45">
    Here the user goes through the web authentication process with their DFSP.
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="698" x="154.25" y="170.583">
    The end result is a redirect back to the PISP with a special URL parameter with a secret provided by the DFSP.
  </text>
  <path fill="#A80036" stroke="#a80036" d="M491 308.445l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M34 312.445h463"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="41" y="269.547">
    AUTH-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="98" y="231.715">
    PATCH /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="130" y="246.848">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="130" y="261.981">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="114" y="277.114">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="360" x="130" y="292.247">
    authToken: &quot;&lt;OTP or SECRET&gt;&quot; // This is new !
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="114" y="307.379">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M45 337.578l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M39 341.578h463"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="51" y="336.512">
    AUTH-2
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="108" y="336.512">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M970 442.375l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M513 446.375h463"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="520" y="403.477">
    AUTH-3
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="577" y="365.645">
    PATCH /consentRequests/456
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="609" y="380.778">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="609" y="395.911">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="593" y="411.043">
    {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="360" x="609" y="426.176">
    authToken: &quot;&lt;OTP or SECRET&gt;&quot; // This is new !
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="593" y="441.309">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M519 471.508l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M513 475.508h468"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="525" y="470.442">
    AUTH-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="582" y="470.442">
    202 Accepted
  </text>
  <path stroke="#a80036" d="M992 504.641h42M1034 504.641v13M993 517.641h41"/>
  <path fill="#A80036" stroke="#a80036" d="M1003 513.64l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="999" y="499.575">
    AUTH-5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="1056" y="499.575">
    Verify the auth token is correct.
  </text>
  <path d="M5 530.64v55h1007v-45l-10-10H5" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1002 530.64v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="986" x="11" y="547.707">
    At this point, the DFSP believes that the User is their customer and that User trusts the PISP. This means that the DFSP can continue by granting consent.
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="820" x="11" y="577.973">
    Note that the DFSP never &quot;responds&quot; to the Consent Request itself. Instead, it will create a Consent resource in the Grant phase.
  </text>
</svg>
