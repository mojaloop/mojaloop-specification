<svg xmlns="http://www.w3.org/2000/svg" height="1122" preserveAspectRatio="none" style="width:1146px;height:1122px" width="1146">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="314" x="416.25" y="28.708">
    Transfer: 1.2.4 Verify Authorization
  </text>
  <path fill="#DDD" stroke="#a80036" d="M1 40.953h444v1076.031H1z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="189.5" y="53.02">
    Mojaloop
  </text>
  <path fill="#DDD" stroke="#a80036" d="M720.5 40.953h76v1076.031h-76z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="731.5" y="53.02">
    DFSP A
  </text>
  <path stroke="#a80036" stroke-dasharray="5,5" d="M36 111.68v950.711M388 111.68v950.711M758.5 111.68v950.711"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 76.383h59v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="12" y="96.378">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 1061.391h59v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="12" y="1081.386">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M336 76.383h101v30.297H336z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="343" y="96.378">
    Auth-Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M336 1061.391h101v30.297H336z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="343" y="1081.386">
    Auth-Service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M724.5 60.086h64v46.594h-64z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="731.5" y="80.081">
    DFSP A
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="732.5" y="96.378">
    (Payer)
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M724.5 1061.391h64v46.594h-64z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="731.5" y="1081.386">
    DFSP A
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="732.5" y="1097.683">
    (Payer)
  </text>
  <path stroke="#a80036" d="M758.5 157.945h42M800.5 157.945v13M759.5 170.945h41"/>
  <path fill="#A80036" stroke="#a80036" d="M769.5 166.945l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="765.5" y="137.747">
    Generate a new
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="870.5" y="137.747">
    verificationRequestId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1038.5" y="137.747">
    , and associate
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="769.5" y="152.879">
    it with the
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="835.5" y="152.879">
    thirdpartyTransactionRequestId
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M278 183.945h475v295H278z"/>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="304" x="282" y="200.012">
    POST /thirdpartyRequests/verifications
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="282" y="215.145">
    FSPIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="282" y="230.278">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="282" y="245.411">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="290" y="260.543">
    &quot;verificationRequestId&quot;: &quot;44444444-0000-0000-0000-000000000000&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="290" y="275.676">
    &quot;challenge&quot;:
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="376" x="369" y="275.676">
    &lt;base64 encoded binary - the encoded challenge&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="745" y="275.676">
    ,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="290" y="290.809">
    &quot;value&quot;: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="298" y="305.942">
    &quot;id&quot;: &quot;string&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="298" y="321.075">
    &quot;rawId&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="298" y="336.207">
    &quot;response&quot;: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="306" y="351.34">
    &quot;authenticatorData&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="306" y="366.473">
    &quot;clientDataJSON&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="306" y="381.606">
    &quot;signature&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="306" y="396.739">
    &quot;userHandle&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="298" y="411.872">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="298" y="427.004">
    &quot;type&quot;: &quot;public-key&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="290" y="442.137">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="290" y="457.27">
    &quot;consentId&quot;: &quot;123&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="282" y="472.403">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M47.5 501.602l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M41.5 505.602h716"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="53.5" y="500.536">
    POST /thirdpartyRequests/verifications
  </text>
  <path fill="#A80036" stroke="#a80036" d="M746.5 530.734l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M36.5 534.734h716"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="43.5" y="529.668">
    202 Accepted
  </text>
  <path fill="#A80036" stroke="#a80036" d="M376.5 559.867l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M36.5 563.867h346"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="43.5" y="558.801">
    POST /thirdpartyRequests/verifications
  </text>
  <path fill="#A80036" stroke="#a80036" d="M47.5 589l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M41.5 593h346"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="53.5" y="587.934">
    202 Accepted
  </text>
  <path stroke="#a80036" d="M388.5 622.133h42M430.5 622.133v13M389.5 635.133h41"/>
  <path fill="#A80036" stroke="#a80036" d="M399.5 631.133l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="395.5" y="617.067">
    Lookup this consent based on consentId
  </text>
  <path stroke="#a80036" d="M388.5 664.266h42M430.5 664.266v13M389.5 677.266h41"/>
  <path fill="#A80036" stroke="#a80036" d="M399.5 673.266l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="356" x="395.5" y="659.2">
    Ensure the accountAddress matches what is in Consent
  </text>
  <path stroke="#a80036" d="M388.5 721.531h42M430.5 721.531v13M389.5 734.531h41"/>
  <path fill="#A80036" stroke="#a80036" d="M399.5 730.531l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249" x="395.5" y="701.332">
    Check that the signed bytes match the
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="395.5" y="716.465">
    publickey we have stored for the consent
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M393 747.531h600v98H393z"/>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="592" x="397" y="763.598">
    PUT /thirdpartyRequests/verifications/44444444-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="397" y="778.731">
    FSPIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="397" y="793.864">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="397" y="808.997">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="405" y="824.129">
    &quot;authenticationResponse&quot;: &quot;VERIFIED&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="397" y="839.262">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M47.5 883.594l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M41.5 887.594h346"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="53.5" y="867.395">
    PUT /thirdpartyRequests/verifications
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="85.5" y="882.528">
    /44444444-0000-0000-0000-000000000000
  </text>
  <path fill="#A80036" stroke="#a80036" d="M376.5 912.727l10 4-10 4 4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M36.5 916.727h346"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="43.5" y="911.661">
    200 OK
  </text>
  <path fill="#A80036" stroke="#a80036" d="M746.5 956.992l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M36.5 960.992h716"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="43.5" y="940.793">
    PUT /thirdpartyRequests/verifications
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="75.5" y="955.926">
    /44444444-0000-0000-0000-000000000000
  </text>
  <path fill="#A80036" stroke="#a80036" d="M47.5 986.125l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M41.5 990.125h716"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="53.5" y="985.059">
    200 OK
  </text>
  <path d="M570 1003.125v40h372v-30l-10-10H570" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M932 1003.125v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="351" x="576" y="1020.192">
    DFSPA now knows that the user signed this transaction
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="576" y="1035.325">
    and can go ahead and initiate the transfer
  </text>
</svg>
