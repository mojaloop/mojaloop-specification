<svg xmlns="http://www.w3.org/2000/svg" height="956" preserveAspectRatio="none" style="width:1439px;height:956px" width="1439">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="371" x="530.5" y="28.708">
    Transfer: 1.2.3 Signed Authorization FIDO
  </text>
  <path fill="#DDD" stroke="#a80036" d="M1 40.953h104v909.234H1z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="36.5" y="53.02">
    PISP
  </text>
  <path fill="#DDD" stroke="#a80036" d="M641.5 40.953h73v909.234h-73z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="644.5" y="53.02">
    Mojaloop
  </text>
  <path fill="#DDD" stroke="#a80036" d="M969 40.953h76v909.234h-76z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="980" y="53.02">
    DFSP A
  </text>
  <path stroke="#a80036" stroke-dasharray="5,5" d="M53 111.68v783.914M677.5 111.68v783.914M1007 111.68v783.914"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 76.383h92v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="12" y="96.378">
    PISP Server
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M5 894.594h92v30.297H5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="12" y="914.589">
    PISP Server
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M646.5 76.383h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="653.5" y="96.378">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M646.5 894.594h59v30.297h-59z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="653.5" y="914.589">
    Switch
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M973 60.086h64v46.594h-64z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="980" y="80.081">
    DFSP A
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="981" y="96.378">
    (Payer)
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M973 894.594h64v46.594h-64z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="980" y="914.589">
    DFSP A
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="981" y="930.886">
    (Payer)
  </text>
  <path fill="#EEE" filter="url(#a)" stroke="#eee" d="M0 142.246h1432v3H0z"/>
  <path stroke="#000" d="M0 142.246h1432M0 145.246h1432"/>
  <path fill="#EEE" filter="url(#a)" stroke="#000" stroke-width="2" d="M640.5 131.68h151v23.133h-151z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="646.5" y="147.747">
    Agreement Phase
  </text>
  <path d="M58 169.813v100h342v-90l-10-10H58" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M390 169.813v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="64" y="186.879">
    PISP looks up the
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="178" y="186.879">
    transactionRequestId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="342" y="186.879">
    and
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="64" y="202.012">
    checks the terms with the user.
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="64" y="232.278">
    If the user agrees to the terms, the PISP
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="317" x="64" y="247.411">
    uses the FIDO API on the user&apos;s device to sign the
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="64" y="262.543">
    the
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="89" y="262.543">
    challenge
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="165" y="262.543">
    string
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M58 284.609h608v310H58z"/>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="600" x="62" y="300.676">
    PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="62" y="315.809">
    FSPIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="62" y="330.942">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="62" y="346.075">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="70" y="361.207">
    &quot;responseType&quot;: &quot;ACCEPTED&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="70" y="376.34">
    &quot;signedPayload&quot;: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="78" y="391.473">
    &quot;signedPayloadType&quot;: &quot;FIDO&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="78" y="406.606">
    &quot;value&quot;: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="86" y="421.739">
    &quot;id&quot;: &quot;string&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="86" y="436.872">
    &quot;rawId&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="86" y="452.004">
    &quot;response&quot;: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="94" y="467.137">
    &quot;authenticatorData&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="94" y="482.27">
    &quot;clientDataJSON&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="94" y="497.403">
    &quot;signature&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="94" y="512.536">
    &quot;userHandle&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="86" y="527.668">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="86" y="542.801">
    &quot;type&quot;: &quot;public-key&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="78" y="557.934">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="70" y="573.067">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="62" y="588.2">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M666 617.398l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M53 621.398h619"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="600" x="60" y="616.332">
    PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000
  </text>
  <path fill="#A80036" stroke="#a80036" d="M64 646.531l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M58 650.531h619"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="70" y="645.465">
    200 OK
  </text>
  <path fill="#A80036" stroke="#a80036" d="M995 690.797l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M678 694.797h323"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="685" y="674.598">
    PUT /thirdpartyRequests/authorizations
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="685" y="689.731">
    /33333333-0000-0000-0000-000000000000
  </text>
  <path fill="#A80036" stroke="#a80036" d="M689 719.93l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M683 723.93h323"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="695" y="718.864">
    200 OK
  </text>
  <path stroke="#a80036" d="M1007 753.063h42M1049 753.063v13M1008 766.063h41"/>
  <path fill="#A80036" stroke="#a80036" d="M1018 762.063l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1014" y="747.997">
    Look up the
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1093" y="747.997">
    transactionRequestId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1257" y="747.997">
    for this
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1305" y="747.997">
    authorizationId
  </text>
  <path stroke="#a80036" d="M1007 795.195h42M1049 795.195v13M1008 808.195h41"/>
  <path fill="#A80036" stroke="#a80036" d="M1018 804.195l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1014" y="790.129">
    Look up the
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1093" y="790.129">
    consentId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1169" y="790.129">
    for this
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1217" y="790.129">
    transactionRequestId
  </text>
  <path d="M850 821.195v55h310v-45l-10-10H850" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M1150 821.195v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="856" y="838.262">
    DFSP has the signed challenge.
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="856" y="853.395">
    It now needs to ask the Auth-Service to verify
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="856" y="868.528">
    the signed challenge.
  </text>
</svg>
